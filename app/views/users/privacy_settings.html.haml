-#   Copyright (c) 2010-2011, Diaspora Inc.  This file is
-#   licensed under the Affero General Public License version 3 or later.  See
-#   the COPYRIGHT file.

- content_for :page_title do
  = t('.title')
.topbar{"data-dropdown" => "dropdown"}
  .topbar-inner
    .bootstrap_header_padding

.container
  .row-fluid
    .span12
      #section_header
        %h2
          = t('privacy')
        = render 'shared/settings_nav'

  .row-fluid
    .span3
    .span6
      %h3
        = "Static Privacy policies"
      = form_tag '/user/set_privacy_policies' do
        -# Location policy section
        -#%h4
        -#  %u
        -#    = "Protect Location"
        -#= check_box_tag :protect_location, 'yes', @protecting_location
        -#= "Protect my location"
        -#%br
        -#= check_box_tag :hide_location, 'yes', @hide_location
        -#= "Hide post to unauthorised users"
        -#%br
        -#= check_box_tag :block_location, 'yes', @block_location
        -#= "Block post to unauthorised users"
        -#%br
        -#%br
        -#= "Protect location against the following aspects"
        -#%br
        -#= select_tag 'location_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1],["Non",-2]), @protected_location), {:multiple => :multiple, :size => @aspects.size + 2}
        -#
        -#%br

        -# Mentions policy section
        -#%h4
        -#  %u
        -#    = "Protect Mentions"
        -#= check_box_tag :protect_mentions, 'yes', @protecting_mentions
        -#= "Protect posts in which I am mentioned"
        -#%br
        -#= check_box_tag :hide_mentions, 'yes', @hide_mentions, {:disabled => true}
        -#= "Hide post to unauthorised users"
        -#%br
        -#= check_box_tag :block_mentions, 'yes', @block_mentions
        -#= "Block post to unauthorised users"
        -#%br
        -#%br
        -#= "Protect mentions against the following aspects"
        -#%br
        -#= select_tag 'mentions_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1]), @protected_mentions), {:multiple => :multiple, :size => @aspects.size + 1}
        -#%br

        -#Pictures policy section
        -#%h4
        -#  %u
        -#    = "Protect Pictures"
        -#= check_box_tag :protect_pics, 'yes', @protecting_pics
        -#= "Protect my pictures"
        -#%br
        -#= check_box_tag :hide_pics, 'yes', @hide_pics, {:disabled => true}
        -#= "Hide post to unauthorised users"
        -#%br
        -#= check_box_tag :block_pics, 'yes', @block_pics
        -#= "Block post to unauthorised users"
        -#%br
        -#%br
        -#= "Protect pictures against the following aspects"
        -#%br
        -#= select_tag 'pics_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1]), @protected_pics), {:multiple => :multiple, :size => @aspects.size + 1}
        -#%br

        -#%h3
        -#  = "Evolving Privacy Policies!"
        -#%p
        -#  = "- Your location will not be disclosed more than 3 times in the following 24 hours (for testing purposes the policy is currently set to 2 times every 40 seconds)"
        -#
        -#= check_box_tag :evolving_location, 'yes', @evolving_location
        -#= "Protect my location"
        -#%br
        -#%br
        -#%br
        -#%p
        -#  = "- Your pictures will not be disclosed during the weekend (for testing purposes we consider that Monday starts at the 15th second of each minute and Friday at the 45th second"
        -#= check_box_tag :weekend_location, 'yes', @weekend_location
        -#= "Protect my pictures"
        -#%br
        -#= "Protect pictures during the weekend against the following aspect (only one can be picked)"
        -#%br
        -#= select_tag 'weekend_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1]), @weekend_pics), {:multiple => false, :size => @aspects.size + 1}
        %br
          %h3
            ="Policies for collaborative decision"
          %br
          -#  allowed aspects for each type of posts (Based on relationship between user and uploader)
          %h4
            %u
            = "Allowed aspects in posts where I have been mentioned"
          -# Friends
          %br
            = "Friends' posts"
          %br
            = check_box_tag :allowed_aspects_friends_posts, 'yes', @allowed_aspects_friends_posts
            = "Allowed aspects"
            %br
              = select_tag 'friend_allowed_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1],["Nobody",-2],["I do not care",-3]), @allowed_aspectsids_for_friends_post), {:multiple => :multiple, :size => @aspects.size + 3}
            = check_box_tag :disallowed_aspects_friends_posts, 'yes', @disallowed_aspects_friends_posts
            = "Dis-allowed aspects"
            %br
              = select_tag 'friend_disallowed_aspects[]', options_for_select( @disallowed_options.collect{|k,v| [k,v]}, @disallowed_aspectsids_for_friends_post), {:multiple => false, :size => @disallowed_options.size, :style => "width:300px"}
          -# Family
          %br
            ="Family's posts"
          %br
            = check_box_tag :allowed_aspects_family_members_posts, 'yes', @allowed_aspects_family_members_posts
            = "Allowed aspects"
            %br
              = select_tag 'family_members_allowed_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1],["Nobody",-2],["I do not care",-3]), @allowed_aspectsids_for_family_members_post), {:multiple => :multiple, :size => @aspects.size + 3}
            = check_box_tag :disallowed_aspects_family_members_posts, 'yes', @disallowed_aspects_family_members_posts
            = "Dis-allowed aspects"
            %br
              = select_tag 'family_members_disallowed_aspects[]', options_for_select( @disallowed_options.collect{|k,v| [k,v]}, @disallowed_aspectsids_for_family_members_post), {:multiple => false, :size => @disallowed_options.size, :style => "width:300px"}
          -# Coworker
          %br
            ="Coworkers' posts"
          %br
            = check_box_tag :allowed_aspects_coworkers_posts, 'yes', @allowed_aspects_coworkers_posts
            = "Allowed aspects "
            %br
              = select_tag 'coworkers_allowed_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1],["Nobody",-2],["I do not care",-3]), @allowed_aspectsids_for_coworkers_post), {:multiple => :multiple, :size => @aspects.size + 3}
            = check_box_tag :disallowed_aspects_coworkers_posts, 'yes', @disallowed_aspects_coworkers_posts
            = "Dis-allowed aspects"
            %br
              = select_tag 'coworkers_disallowed_aspects[]', options_for_select( @disallowed_options.collect{|k,v| [k,v]}, @disallowed_aspectsids_for_coworkers_post), {:multiple => false, :size => @disallowed_options.size, :style => "width:300px"}
            %br
            ="Acquaintances' posts"
          %br
            = check_box_tag :allowed_aspects_acquaintances_posts, 'yes', @allowed_aspects_acquaintances_posts
            = "Allowed aspects"
            %br
              = select_tag 'acquaintances_allowed_aspects[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1],["Nobody",-2],["I do not care",-3]), @allowed_aspectsids_for_acquaintances_post), {:multiple => :multiple, :size => @aspects.size + 3}
            = check_box_tag :disallowed_aspects_acquaintances_posts, 'yes', @disallowed_aspects_acquaintances_posts
            = "Dis-allowed aspects"
            %br
              = select_tag 'acquaintances_disallowed_aspects[]', options_for_select( @disallowed_options.collect{|k,v| [k,v]}, @disallowed_aspectsids_for_acquaintances_post), {:multiple => false, :size => @disallowed_options.size, :style => "width:300px"}

          %br
          -#%h4
          -#%u
          -#  = "sensitivity level of your aspects"
          -#%br
          -#  = @userrr.each do |h|
          -#  = h.name
          -#.small-horizontal-spacer
          %br
          %h4
            %u
              = "Sensitive level of shared posts based on their types "
          %br
            = "sensitive level of post has location"
            = select_tag 'sl_location_posts_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_ption_locaation_posts), {:multiple => false, :size => @sensitive_options}
          %br
            = "sensitive level of post has pictures"
            = select_tag 'sl_picture_posts_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_option_picture_posts), {:multiple => false, :size => @sensitive_options}
          %br
            = "sensitive level of post has mentioned users"
            = select_tag 'sl_mention_posts_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_option_mention_posts), {:multiple => false, :size => @sensitive_options}
        %br
          %h4
            %u
              = "Sensitive level of your aspects "
          %br
            = "The sensitivity level of friends"
            = select_tag 'sl_friends_aspect_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_ption_friends_aspect), {:multiple => false, :size => @sensitive_options}
          %br
            = "The sensitivity level of family"
            = select_tag 'sl_family_aspect_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_option_family_aspect), {:multiple => false, :size => @sensitive_options}
          %br
            = "The sensitivity level of co-workers"
            = select_tag 'sl_coworkers_aspect_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_option_work_aspect), {:multiple => false, :size => @sensitive_options}
          %br
            = "The sensitivity level of acquaintances"
            = select_tag 'sl_acquaintances_aspect_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_option_acquaintances_aspect), {:multiple => false, :size => @sensitive_options}
            %br
            = "The sensitivity level of users who are not belong to your aspects list"
            = select_tag 'sl_users_not_in_aspect_listt_option', options_for_select(@sensitive_options.collect{|k,v| [k]}, @selected_sl_option_users_not_in_aspect_list), {:multiple => false, :size => @sensitive_options}
        %br
          %h4
            %u
              = "Trust level of your aspects "
          %br
            = "The trust level of friends"
            = select_tag 'tl_friends_aspect_option', options_for_select(@trust_level_options.collect{|k,v| [k]}, @selected_tl_option_friends_aspect), {:multiple => false, :size => @trust_level_options}
          %br
            = "The trust level of family"
            = select_tag 'tl_family_aspect_option', options_for_select(@trust_level_options.collect{|k,v| [k]}, @selected_tl_option_family_aspect), {:multiple => false, :size => @trust_level_options}
          %br
            = "The trust level of co-workers"
            = select_tag 'tl_coworkers_aspect_option', options_for_select(@trust_level_options.collect{|k,v| [k]}, @selected_tl_option_work_aspect), {:multiple => false, :size => @trust_level_options}
          %br
            = "The trust level of acquaintances"
            = select_tag 'tl_acquaintances_aspect_option', options_for_select(@trust_level_options.collect{|k,v| [k]}, @selected_tl_option_acquaintances_aspect), {:multiple => false, :size => @trust_level_options}
          %br
            = "The trust level of users who are not belong to your aspects list"
            = select_tag 'tl_users_not_in_aspect_list_option', options_for_select(@trust_level_options1.collect{|k,v| [k]}, @selected_tl_option_users_not_in_aspect_list), {:multiple => false, :size => @trust_level_options1}
        %br
          %h4
            %u
              = "Trust threshold value to reshare "
          %br
          %p
            = " trust threshold indicates how high the minimum trust value from you to any accessor should be to grant him/her permission to reshare the item."
          = select_tag 'tr_threshold', options_for_select(@trust_level_options.collect{|k,v| [k]}, @tr_threshold_option), {:multiple => false, :size => @trust_level_options}
        %br
          %h4
            %u
              = "Mentioned users re_sharing"
          %br
          %p
            = "Select the aspects which their members (who consider here as mentioned users) are allowed to re-share "
          %br
            = select_tag 'allowed_aspects_reshare[]', options_for_select(@aspects.collect{|x| [x.name,x.id]}.push(["Everyone", -1],["Nobody",-2],["I do not care",-3]), @selected_allowed_aspects_reshare), {:multiple => :multiple, :size => @aspects.size + 3}
        %hr
        = submit_tag 'Save changes', :class => "btn"

        %hr
      %h3
        = t('.ignored_users')
      - @blocks.each do |block|
        = block.person_name
        \-
        = link_to t('.stop_ignoring'), block_path(block),
          :method => :delete